subject:
  system: |
    You are a professional assistant.
  user: |
    아래 지문과 문제를 보고 과목을 분류하세요.
    지문: {paragraph}
    문제: {question}
    선택지: {choices}

    과목 후보: 한국사, 경제, 철학, 과학기술, 사회과학, 인문학, 문학, 기타

    ## 응답 형식 (반드시 JSON)
    ```json
    {{
        "subject": str
    }}
    ```

score:
  system: |
    당신은 검색 결과의 적합성을 평가하는 검증자입니다.
  user: |
    Query: {query}
    Retrieved Chunk: {chunk}
    위 chunk가 query에 대해 정답 근거로 얼마나 유효한지 0~5점으로 평가하세요.
    기준:
    - 0: 완전히 무관 / 동명이인 / 헛소리
    - 1~2: 일부 단어만 겹침, 정답 근거로 부적절
    - 3: 부분적으로 관련 있음
    - 4: 상당히 관련 있음
    - 5: 정답 근거로 직접 사용 가능
    반드시 JSON 형식으로만 응답하세요.
    ```json
    {{
      "validity": 0,
      "why": "한 줄 설명"
    }}
    ```
refine_query:
  system: |
    당신은 검색 쿼리 개선 전문가입니다.
  user: |
    기존 검색 쿼리가 충분한 정보를 찾지 못했습니다.
    과목: {subject}
    지문: {paragraph}
    질문: {question}
    선택지: {choices}
    기존 쿼리: {queries}
    더 구체적이고 핵심적인 검색 쿼리를 새로 생성하세요.
    - 반드시 핵심 개념, 고유명사, 시대/제도/인물 키워드를 포함하세요.
    - 질문 3~5개 생성
    반드시 JSON 형식으로만 응답하세요.
    ```json
    {{
      "query": list[str]
    }}
    ```

query:
  system: |
    당신은 검색 최적화 전문가입니다. 주어진 문제를 분석하여 정답을 찾기 위해 필요한 질문들을 생성합니다.
  user: |
    과목: {subject}
    지문: {paragraph}
    질문: {question}
    선택지: {choices}

    다음 규칙을 따르세요.(총 개수: 1번에서 1개 + 2번에서 선택지의 개수만큼)
    1. 질문과 관련된 지문의 가장 핵심이 되는 키워드와 질문을 연관지어 질문을 생성하세요.
    2. 각 선택지의 가장 핵심이 되는 키워드와 질문을 연관지어 질문을 생성하세요.(선택지를 생성하지 말고 질문만 생성하세요.)
      예시: 선택지가 4개인 경우 5개를 생성

    ## 응답 형식 (반드시 JSON)
    ```json
    {{
        "query": list[str]
    }}
    ```

generate:
  system: |
    당신은 {subject} 과목 문제 풀이 전문가입니다.
    주어진 지문과 질문, 선택지를 분석하고, 참고자료와 few-shot 예시들을 활용하여 선택지 중 가장 적합한 답 하나를 도출하세요.
    응답 형식을 철저히 지키세요.
  user: |
    지문: {paragraph}
    질문: {question}
    질문 참고(필요시 참고): {question_plus}
    참고자료: {reference}
    선택지: {choices}

    ## 유사한 문제들의 예시
    [예시1]
    {shot1}
    [예시2]
    {shot2}
    [예시3]
    {shot3}

    ## 응답 형식 (반드시 JSON)
    ```json
    {{
        "reasoning": 선택 근거(500자 내외),
        "answer": 선택지 번호(int),
        "confidence": "high/medium/low"
    }}
    ```

generate_section:
  system: |
    당신은 {subject} 과목 문제 풀이 전문가입니다.
    주어진 지문과 질문, 선택지를 분석하고, 참고자료를 활용하여 선택지 중 가장 적합한 답 하나를 도출하세요.
    반드시 JSON 형식으로만 응답하세요.
  user: |
    지문: {paragraph}
    질문: {question}
    질문 참고(필요시 참고): {question_plus}
    참고자료: {reference}
    선택지: {choices}

    위 정보를 바탕으로 정답을 선택하세요.

    ## 응답 형식 (반드시 JSON만 출력, 다른 텍스트 출력 금지)
    ```json
    {{
        "reasoning": "선택 근거 (300자 이내)",
        "answer": 선택지_번호(int),
        "confidence": "high/medium/low"
    }}
    ```
